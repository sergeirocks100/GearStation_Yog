(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Handlers=function(){function e(e,n){this.bus=e,this.fragment=null!=n?n:document,this.attachHandlers=t(this.attachHandlers,this),this.updateLinks=t(this.updateLinks,this),this.updateStatus=t(this.updateStatus,this),this.bus.on("rendered",this.updateStatus),this.bus.on("rendered",this.updateLinks),this.bus.on("rendered",this.attachHandlers),this.bus.on("error",this.error)}return e.prototype.updateStatus=function(t){var e;e=this.fragment.queryAll(".statusicon"),e.forEach(function(e){var n;switch(e.className="statusicon fa fa-eye fa-2x",t.config.status){case 2:n="good";break;case 1:n="average";break;default:n="bad"}e.classList.add(n)})},e.prototype.updateLinks=function(t){var e;e=this.fragment.queryAll(".link"),2!==t.config.status&&e.forEach(function(t){t.className="link disabled"})},e.prototype.attachHandlers=function(t){var e;e=function(e){var n;n=this.data("href"),null!=n&&2===t.config.status&&(this.classList.add("pending"),location.href=n)},this.fragment.queryAll(".link").forEach(function(t){t.on("click",e)})},e.prototype.error=function(t){var e;e=util.href({nanoui_error:t}),location.href=e},e}()}).call(this),function(){this.Helpers=function(){function t(t,e){this.bus=t,this.fragment=null!=e?e:document}return t.prototype.link=function(t,e,n,i,a){return null==t&&(t=""),null==e&&(e=""),null==n&&(n={}),null==i&&(i=""),null==a&&(a=""),n=util.href(n),e&&(e="<i class='pending fa fa-fw fa-spinner fa-pulse'></i><i class='main fa fa-fw fa-"+e+"'></i>",a+=" iconed"),i?"<div unselectable='on' class='link inactive "+i+" "+a+"'>"+e+t+"</div>":"<div unselectable='on' class='link active "+a+"' data-href='"+n+"'>"+e+t+"</div>"},t.prototype.bar=function(t,e,n,i,a){var r;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=100),null==i&&(i=""),null==a&&(a=""),n>e?e>t?t=e:t>n&&(t=n):t>e?t=e:n>t&&(t=n),r=Math.round((t-e)/(n-e)*100),"<div class='bar'> <span class='barFill "+i+"' style='width: "+r+"%;'></span> <span class='barText'>"+a+"</span> </div>"},t.prototype.round=function(t){return Math.round(t)},t.prototype.fixed=function(t,e){return null==e&&(e=1),Number(Math.round(t+"e"+e)+"e-"+e)},t.prototype.floor=function(t){return Math.floor(t)},t.prototype.ceil=function(t){return Math.ceil(t)},t}()}.call(this),function(){document.when("ready",function(t){return function(){var e;e={},t.nanoui=new t.NanoUI(e,document),t.handlers=new t.Handlers(e,document),t.helpers=new t.Helpers(e,document),t.util=new t.Util(e,document),e.emit("memes"),t.NanoBus=e}}(this))}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.NanoUI=function(){function e(e,n){return this.bus=e,this.fragment=null!=n?n:document,this.render=t(this.render,this),this.update=t(this.update,this),this.serverUpdate=t(this.serverUpdate,this),this.bus.on("serverUpdate",this.serverUpdate),this.bus.on("update",this.update),this.bus.on("render",this.render),this.bus.on("memes",this.render),this.initialized=!1,this.layoutRendered=!1,this.contentRendered=!1,this.data={},this.initialData=JSON.parse(this.fragment.query("#data").data("initial")),null==this.initialData&&("data"in this.initialData||"config"in this.initalData)?void this.bus.emit("error","Initial data did not load correctly."):void 0}return e.prototype.serverUpdate=function(t){var e,n,i;try{e=JSON.parse(t)}catch(i){return n=i,void NanoBus.emit("error",n.fileName+":"+n.lineNumber+" "+n.message)}this.bus.emit("update",e)},e.prototype.update=function(t){null==t.data&&(null!=this.data.data?t.data=this.data.data:t.data={}),this.data=t,this.initialized&&this.bus.emit("render",this.data),this.bus.emit("updated")},e.prototype.render=function(t){var e,n,i,a;this.initialized||(t=this.initialData);try{(!this.layoutRendered||t.config.autoUpdateLayout)&&(a=this.fragment.query("#layout"),a.innerHTML=TMPL[t.config.templates.layout](t.data,t.config,helpers),this.layoutRendered=!0,this.bus.emit("layoutRendered")),(!this.contentRendered||t.config.autoUpdateContent)&&(e=this.fragment.query("#content"),e.innerHTML=TMPL[t.config.templates.content](t.data,t.config,helpers),this.contentRendered=!0,this.bus.emit("contentRendered"))}catch(i){return n=i,void this.bus.emit("error",n.fileName+":"+n.lineNumber+" "+n.message)}this.bus.emit("rendered",t),this.initialized||(this.initialized=!0)},e}()}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Util=function(){function e(e,n){this.bus=e,this.fragment=null!=n?n:document,this.href=t(this.href,this),this.urlParameters=JSON.parse(this.fragment.query("#data").data("url-parameters"))}return e.prototype.extend=function(t,e){return Object.keys(e).forEach(function(n){var i;i=e[n],i&&"[object Object]"===Object.prototype.toString.call(i)?(t[n]=t[n]||{},this.extend(t[n],i)):t[n]=i}),t},e.prototype.href=function(t){var e;return e=new Url("byond://"),this.extend(e.query,this.extend(t,this.urlParameters)),e},e}()}.call(this);