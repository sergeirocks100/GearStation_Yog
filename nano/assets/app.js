(function(){this.Handlers=function(){function t(t){this.bus=t,this.bus.on("rendered",this.updateStatus),this.bus.on("rendered",this.updateLinks),this.bus.on("rendered",this.attachHandlers),this.bus.on("error",this.error)}return t.prototype.updateStatus=function(t){var e;e=document.queryAll(".statusicon"),e.forEach(function(e){switch(t.config.status){case 2:e.className="statusicon good";break;case 1:e.className="statusicon average";break;default:e.className="statusicon bad"}})},t.prototype.updateLinks=function(t){var e;e=document.queryAll(".link"),2!==t.config.status&&e.forEach(function(t){t.className="link disabled"})},t.prototype.attachHandlers=function(t){var e;e=function(e){var n;n=this.data("href"),null!=n&&2===t.config.status&&(this.classList.add("pending"),location.href=n)},document.queryAll(".link").forEach(function(t){t.on("click",e)})},t.prototype.error=function(t){var e;e=Util.href({nanoui_error:t}),location.href=e},t}()}).call(this),function(){this.Helpers={link:function(t,e,n,i,a){return null==t&&(t=""),null==e&&(e=""),null==n&&(n={}),null==i&&(i=""),null==a&&(a=""),n=window.Util.href(n),e&&(e="<i class='pending fa fa-fw fa-spinner fa-pulse'></i><i class='main fa fa-fw fa-"+e+"'></i>",a+=" iconed"),i?"<div unselectable='on' class='link inactive "+i+" "+a+"'>"+e+t+"</div>":"<div unselectable='on' class='link active "+a+"' data-href='"+n+"'>"+e+t+"</div>"},bar:function(t,e,n,i,a){var s;return null==t&&(t=0),null==e&&(e=0),null==n&&(n=100),null==i&&(i=""),null==a&&(a=""),n>e?e>t?t=e:t>n&&(t=n):t>e?t=e:n>t&&(t=n),s=Math.round((t-e)/(n-e)*100),"<div class='bar'> <span class='barFill "+i+"' style='width: "+s+"%;'></span> <span class='barText "+i+"'>"+a+"</span> </div>"},round:function(t){return Math.round(t)},fixed:function(t,e){return null==e&&(e=1),Number(Math.round(t+"e"+e)+"e-"+e)},floor:function(t){return Math.floor(t)},ceil:function(t){return Math.ceil(t)}}}.call(this),function(){document.when("ready",function(t){return function(){var e,n,i;e={},i=new t.NanoUI(e),n=new t.Handlers(e),e.emit("memes"),t.NanoBus=e}}(this))}.call(this),function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.NanoUI=function(){function e(e){return this.bus=e,this.render=t(this.render,this),this.update=t(this.update,this),this.serverUpdate=t(this.serverUpdate,this),this.bus.on("serverUpdate",this.serverUpdate),this.bus.on("update",this.update),this.bus.on("render",this.render),this.bus.on("memes",this.render),this.initialized=!1,this.layoutRendered=!1,this.contentRendered=!1,this.data={},this.initialData=JSON.parse(document.query("#data").data("initial")),null==this.initialData&&("data"in this.initialData||"config"in this.initalData)?void this.bus.emit("error","Initial data did not load correctly."):void 0}return e.prototype.serverUpdate=function(t){var e,n,i;try{e=JSON.parse(t)}catch(i){return n=i,void NanoBus.emit("error",n.fileName+":"+n.lineNumber+" "+n.message)}this.bus.emit("update",e)},e.prototype.update=function(t){null==t.data&&(null!=this.data.data?t.data=this.data.data:t.data={}),this.data=t,this.initialized&&this.bus.emit("render",this.data),this.bus.emit("updated")},e.prototype.render=function(t){var e,n,i,a;this.initialized||(t=this.initialData);try{(!this.layoutRendered||t.config.autoUpdateLayout)&&(a=document.query("#layout"),a.innerHTML=TMPL[t.config.templates.layout](t.data,t.config,Helpers),this.layoutRendered=!0,this.bus.emit("layoutRendered")),(!this.contentRendered||t.config.autoUpdateContent)&&(e=document.query("#content"),e.innerHTML=TMPL[t.config.templates.content](t.data,t.config,Helpers),this.contentRendered=!0,this.bus.emit("contentRendered"))}catch(i){return n=i,void this.bus.emit("error",n.fileName+":"+n.lineNumber+" "+n.message)}this.bus.emit("rendered",t),this.initialized||(this.initialized=!0)},e}()}.call(this),function(){this.Util={extend:function(t,e){return Object.keys(e).forEach(function(n){var i;i=e[n],i&&"[object Object]"===Object.prototype.toString.call(i)?(t[n]=t[n]||{},this.extend(t[n],i)):t[n]=i}),t},href:function(t){var e,n;return e=JSON.parse(document.query("#data").data("url-parameters")),n=new Url("byond://"),this.extend(n.query,this.extend(t,e)),n}}}.call(this);