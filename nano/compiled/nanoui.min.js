/*! nanoui 09-12-2015 */
var nanoui=function(a){"use strict";var b={},c=!1,d=!1,e=!1,f={},g={},h=function(g){c||(g=f),b.emit("beforeRender",g);try{(!d||g.config.autoUpdateLayout)&&(document.query("#layout").innerHTML=a[g.config.templates.layout](g.data,g.config,b.helpers),d=!0,b.emit("layoutRendered")),(!e||g.config.autoUpdateContent)&&(document.query("#content").innerHTML=a[g.config.templates.content](g.data,g.config,b.helpers),e=!0,b.emit("contentRendered"))}catch(h){return void b.emit("error",h.fileName+":"+h.lineNumber+": "+h.message)}b.emit("afterRender",g),c||(c=!0)},i=function(a){b.util.hasKey(a,"data")||(b.util.hasKey(g,"data")?a.data=g.data:a.data={}),g=a,c&&b.emit("render",g),b.emit("updateReceived")},j=function(a){var c;try{c=JSON.parse(a)}catch(d){return void b.emit("error",d.fileName+":"+d.lineNumber+": "+d.message)}b.emit("serverUpdateReceived"),b.emit("update",c)},k=function(){return b.emit("earlyInit"),f=JSON.parse(document.query("body").data("initial-data")),null!==f&&b.util.hasKey(f,"config")&&b.util.hasKey(f,"data")?void b.emit("lateInit"):void b.emit("error","Initial data did not load correctly.")};return document.when("ready",k),b.on("lateInit",h),b.on("serverUpdate",j),b.on("render",h),b.on("update",i),b}(TMPL);nanoui.handlers=function(a){"use strict";var b=function(a){var b=document.query("#statusicon");if(b)switch(a.config.status){case 2:b.className="good";break;case 1:b.className="average";break;default:b.className="bad"}},c=function(a){var b=document.queryAll(".link"),c=document.queryAll(".link.pending");2===a.config.status?(b.forEach(function(a){a.classList.remove("disabled")}),c.forEach(function(a){a.classList.remove("pending")})):b.forEach(function(a){a.classList.remove("active"),a.classList.remove("pending"),a.classList.add("disabled")})},d=function(a){var b=function(b){b.preventDefault();var c=this.data("href");null!==c&&(2===a.config.status&&this.classList.add("pending"),location.href=c)};document.queryAll(".link.active").forEach(function(a){a.on("click",b)})},e=function(b){var c=a.util.href({nanoui_error:b});location.href=c};return a.on("beforeRender",b),a.on("afterRender",c),a.on("afterRender",d),a.on("error",e),{}}(nanoui),nanoui.helpers=function(a){"use strict";var b={};return b.link=function(b,c,d,e,f){var g={};return g.text=b||"",g.icon="",g.parameters=a.util.href(d),g.status=e,g.elementClass=f||"",a.util.yes(c)&&(g.icon=a.util.format("<i class='pending fa fa-fw fa-spinner fa-pulse'></i><i class='main fa fa-fw fa-#{icon}'></i>",{icon:c}),g.elementClass+=" iconed"),a.util.yes(e)?a.util.format("<div unselectable='on' class='link inactive #{status} #{elementClass}'>#{icon}#{text}</div>",g):a.util.format("<div unselectable='on' class='link active #{elementClass}' data-href='#{parameters}'>#{icon}#{text}</div>",g)},b.bar=function(b,c,d,e,f){var g={};return d>c?c>b?b=c:b>d&&(b=d):b>c?b=c:d>b&&(b=d),g.styleClass=e||"",g.barText=f||"",g.percentage=Math.round((b-c)/(d-c)*100),a.util.format("<div class='bar'><div class='barFill #{styleClass}' style='width: #{percentage}%;'></div><div class='barText #{styleClass}'>#{barText}</div></div>",g)},b.round=function(a){return Math.round(a)},b.fixed=function(b,c){return a.util.no(c)&&(c=1),Number(Math.round(b+"e"+c)+"e-"+c)},b.floor=function(a){return Math.floor(a)},b.ceil=function(a){return Math.ceil(a)},b}(nanoui),nanoui.util=function(a){"use strict";var b={},c={},d=function(){return c=JSON.parse(document.query("body").data("url-parameters")),null===c?void a.emit("error","URL parameters did not load correctly."):void 0};return b.extend=function(a,c){return Object.keys(c).forEach(function(d){var e=c[d];e&&"[object Object]"===Object.prototype.toString.call(e)?(a[d]=a[d]||{},b.extend(a[d],e)):a[d]=e}),a},b.format=function(a,b){function c(a,b){var c=a.lastIndexOf("()");return c>0&&c+"()".length===a.length?b[a.substring(0,c)]():b[a]}return b?a.replace(/#\{(.+?)\}/g,function(a,d){var e,f,g=d.split("."),h=c(g[0],b);for(e=1,f=g.length;f>e;e++)h=c(g[e],h);return h}):a},b.href=function(b){var d=new Url("byond://");return a.util.extend(d.query,a.util.extend(b,c)),d},b.isFunction=function(a){return!!(a&&a.call&&a.apply)},b.hasKey=function(a,b){return a.hasOwnProperty(b)},b.yes=function(a){return!("undefined"===a||!a)},b.no=function(a){return"undefined"===a||!a},a.on("earlyInit",d),b}(nanoui);